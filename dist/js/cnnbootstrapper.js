if(CNNVIDEOAPI.AnalyticsFactory={getAnalyticsFronContext:function(e,n,t){var o=n[t];return o&&o.analytics||(o=n["default"]),this.getAnalytics(e,o.analytics)},getAnalytics:function(e,n){if(!n||"string"==typeof n)return"string"==typeof n&&"none"===n?[]:[this.createHandler(e,n)];var t=[];for(var o in n){var i=n[o],r=this.createHandler(e,o,i);r&&t.push(r)}return t},createHandler:function(e,n,t){var o;switch(n){case"jsmdJumbotron":o=new CNNVIDEOAPI.JSMDJumbotronTrackingEventHandler(e,e,e.videoConfig,t);break;case"jsmd":o=new CNNVIDEOAPI.JSMDAnalyticsEventHandler(e,e,e.videoConfig,t);break;case"jsmdNewAPI":o=new CNNVIDEOAPI.JSMDNewAPIVideoTrackingEventHandler(e,e,e.videoConfig,t);break;case"jsmdVANAPI":o=new CNNVIDEOAPI.JSMDVANAPIVideoTrackingEventHandler(e,e,e.videoConfig,t);break;case"jsmdTVEAPI":o=new CNNVIDEOAPI.JSMDTVEAPIVideoTrackingEventHandler(e,e,e.videoConfig,t);break;case"jsmdCNNgoFreePreview":o=new CNNVIDEOAPI.JSMDCNNgoFreePreviewTrackingEventHandler(e,e,e.videoConfig,t)}return o}},String.prototype.replaceAll=function(e,n){var t=this;return t.replace(RegExp(e,"g"),n)},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var n,t,o=Object(this),i=o.length>>>0;if(0===i)return-1;if(n=0,arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&1/0!=n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(t=n>=0?n:Math.max(i-Math.abs(n),0);i>t;t++)if(t in o&&o[t]===e)return t;return-1}),"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=t.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var r=[];for(var a in i)e.call(i,a)&&r.push(a);if(n)for(var d=0;o>d;d++)e.call(i,t[d])&&r.push(t[d]);return r}}()),"bind"in Function.prototype||(Function.prototype.bind=function(e){var n=this;if(1>=arguments.length)return function(){return n.apply(e,arguments)};var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(e,0===arguments.length?t:t.concat(Array.prototype.slice.call(arguments)))}}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,n){for(var t=0,o=this.length;o>t;t++)t in this&&e.call(n,this[t],t,this)}),Function.prototype.bind){var logMethods=["log","debug","info","warn","error","fatal"],windowMethods=["logMsg","debugMsg","infoMsg","warnMsg","errorMsg","fatalMsg"];logMethods.forEach(function(e,n){window[windowMethods[n]]=function(){"object"!=typeof log&&"function"!=typeof log||void 0===log[e]?("error"===e||"warn"===e)&&console&&console[e]&&console[e].apply&&console[e].apply(console,arguments):log[e].apply(log,arguments)}},Function.prototype.bind)}CNNVIDEOAPI.Bootstrapper=function(e){this.mappingFileURL=e,this.color="",this.apiMapping={},this.utils=CNNVIDEOAPI.Utils,this.depMgr=CNNVIDEOAPI.DependencyManager,__construct=function(){}(this),this.initialize=function(){this.loadMapping()},this.cnn_onAPIMappingLoadComplete=function(e){window.debugMsg("cnn_onAPIMappingLoadComplete called and referring url is :"+window.location.href),this.apiMapping=e,CNNVIDEOAPI.apiMapping=e,CNNVIDEOAPI.currentVersion=this.apiMapping.version,this.depMgr.loadApiDependenciesFromConfig(e),void 0!==CNNVIDEOAPI.client&&void 0!==e.client&&void 0!==e.client[CNNVIDEOAPI.client]&&void 0!==e.client[CNNVIDEOAPI.client].config_paths&&(CNNVIDEOAPI.deviceType=void 0===CNNVIDEOAPI.deviceType?"desktop":CNNVIDEOAPI.deviceType,CNNVIDEOAPI.configPaths=e.client[CNNVIDEOAPI.client].config_paths)},this.loadMapping=function(){this.utils.getDebug();var e=this,n={test:window.jQuery,failTestURL:"http://z.cdn.turner.com/cnn/.e/js/libs/jquery-1.9.1.min.js"},t=function(){window.cnn_onAPIMappingLoadComplete=jQuery.proxy(e.cnn_onAPIMappingLoadComplete,e),e.depMgr.loadJSON(e.mappingFileURL)};this.depMgr.loadDependency(n,t)}},CNNVIDEOAPI.CNNVideoManager=function(){function e(){function e(e){var n=CNNVIDEOAPI.Utils.deserializeJSONData(e.data),t=window.CNNVIDEOS[n.name];t&&t instanceof CNNVIDEOAPI.CNNIFrameVideoPlayer&&(window.frames[n.name],t.broker(e))}function t(e,n,t){if(void 0!==e.adsection){var o,i=jQuery.extend({},t.adSectionOverrideKeys,n.adSectionOverrideKeys),r=e.adsection||"";void 0!==i&&(o=i[r.toLowerCase()]),void 0!==o?(window.debugMsg("Video Ad SSID overide key '"+r+"' was requested which maps to '"+o+"'"),e.adsection=o):0===r.indexOf("const-")&&void 0!==n.adsection&&(window.debugMsg("Attempt was made to use an adsection override constant value of "+r+" which wasn't found. The default adsection '"+n.adsection+"' will be used instead"),e.adsection=n.adsection)}}function o(e,n){if(Array.isArray(e)){var o=e[0];e=o}var i={},r=CNNVIDEOAPI.Utils.getContextByName(n,e.videoConfig),a=CNNVIDEOAPI.Utils.getDefaultContext(n);t(e.videoConfig,r,a),jQuery.extend(i,r),jQuery.extend(i,e.videoConfig);try{i.cvpId=CNNVIDEOAPI.Utils.getNextCVPId()}catch(d){window.errorMsg&&window.errorMsg("Couldn't set an cvp id. Default way of generating a CVP Id will be used. error is: ",d)}e.videoConfig=i;var c;!r.type&&a&&a.type&&(r.type=a.type),c=r.type&&"embedded"===r.type?new CNNVIDEOAPI.CNNEmbeddedVideoPlayer(e,n):new CNNVIDEOAPI.CNNIFrameVideoPlayer(e,n);try{if(window.CNNVIDEOS)for(var s=Object.keys(window.CNNVIDEOS),l=s.length-1;l>=0;l--){var u=window.CNNVIDEOS[s[l]];u.getParentMarkupId()===c.getParentMarkupId()&&u.getMarkupId()!==c.getMarkupId()&&delete window.CNNVIDEOS[s[l]]}}catch(d){}window.CNNVIDEOS=window.CNNVIDEOS||{},window.CNNVIDEOS[c.getMarkupId()]=c}return{videoQueue:[],pauseOthers:function(e){var n,t,o=Object.keys(window.CNNVIDEOS),i=[];for(n=0,l=o.length;l>n;n++){var r=window.CNNVIDEOS[o[n]],a=o[n];a===e&&(t=r),a!==e&&i.push(r)}if(t&&t.allowAutoPause())for(n=0;i.length>n;n++){var d=i[n];d.allowAutoPause()&&d.pause()}},getVideoQueue:function(){return this.videoQueue},pauseVideo:function(){try{window.debugMsg("pauseVideo is not implemented yet")}catch(e){window.errorMsg("Video Player failed error is :"+e)}},stopVideo:function(e){try{this.getPlayerByContainer(e).stop()}catch(n){window.errorMsg("Video Player failed error is :"+n)}},replayVideo:function(e){try{this.getPlayerByContainer(e).replay()}catch(n){window.errorMsg("Video Player failed error is :"+n)}},playVideo:function(e,n,t){try{this.getPlayerByContainer(e).play(n,t?t:{})}catch(o){window.errorMsg("Video Player failed error is :"+o)}},getPlayerByParentContainer:function(e){for(var n=Object.keys(window.CNNVIDEOS),t=0,o=n.length;o>t;t++){var i=window.CNNVIDEOS[n[t]];if(n[t],e===i.getParentMarkupId())return i}},getPlayerByContainer:function(e){var n=window.CNNVIDEOS[e];return n||(window.infoMsg("Video Player not found for container Id '"+e+"'. Will check for a parent container with that name"),n=this.getPlayerByParentContainer(e)),n},renderVideoContainer:function(e){this.renderMultipleContainers(e)},getSectionConfigPath:function(e,n,t,o){var i,r="";if(void 0!==window.Modernizr&&window.Modernizr.mobile&&(CNNVIDEOAPI.deviceType=window.Modernizr.phone?"phone":"tablet"),void 0!==o&&o)try{if(o.desktop&&o.tablet&&o.phone)r=o[CNNVIDEOAPI.deviceType];else{if("string"!=typeof configPathOverrides)return this.getSectionConfigPath(e,n,t);r=o}}catch(a){window.errorMsg("Failed to retrieve config path overrides. Will use defaults instead.",a)}else r=CNNVIDEOAPI.configPaths[CNNVIDEOAPI.deviceType];return t&&""!==t?(t=t.replace(/-/g,""),i=r):(window.warnMsg("CNNVideoManager.renderMultipleContainers: You did not specify an explicit 'section' value. The 'default' section will be used. If this isn't the behavior you expected, please check your configuration/setup for this player"),t="default",i=r),i=i.replace("{hostandbasepath}",CNNVIDEOAPI.apiBaseUrl).replace("{version}",CNNVIDEOAPI.Utils.getVersion()).replace("{section}",t?t:"").replace("{site}",e).replace("{profile}",n)},renderMultipleContainers:function(t){if(t&&!Array.isArray(t))return void this.renderMultipleContainers([t]);for(var i,r,a,d,c=n,s={},l=0;t.length>l;l++){var u=t[l];this.getVideoQueue().push(u);var p=u.videoConfig,g=u.overridesConfig||{};if(r&&r!==p.network||a&&a!==p.profile){var f="Mixing and matching network and/or profile types can cause dependency conflicts.\nMake sure network and profile values are the same for all the videos you are trying to create.\nThe program will now stop.";throw Error(f)}r=p.network,a=p.profile,d=p.section,p.context;var w=g.configPathOverride;d&&""!==d?(d=d.replace(/-/g,""),i=this.getSectionConfigPath(r,a,d,w)):(window.warnMsg("CNNVideoManager.renderMultipleContainers: You did not specify an explicit 'section' value. The 'default' section will be used. If this isn't the behavior you expected, please check your configuration/setup for this player"),d="default",i=CNNVIDEOAPI.apiBaseUrl+CNNVIDEOAPI.Utils.getVersion()+"/config/"+r+"/"+a+"/sectionconfig.json"),0>=Object.keys(s).indexOf(i)&&(s[d]=i)}var y=function(n,t){n=n.data?n.data:n,window.debugMsg("sectionLoadCompleteFunction section:"+t);for(var i=function(){if(jQuery&&jQuery.receiveMessage&&void 0!==e&&e&&jQuery.receiveMessage(e),c.getVideoQueue().length>0)for(var i=c.getVideoQueue().length-1;i>=0;i--){t=void 0===t||""===t||"default"===t?"":t;var r=c.getVideoQueue()[i],a=r.videoConfig.section?r.videoConfig.section:"";if(t===a){var d=c.getVideoQueue()[i];c.getVideoQueue().splice(i,1),o(d,n.contexts)}}},r=[],a=CNNVIDEOAPI.apiMapping||{},d=["global_dependencies"],s=0;c.videoQueue.length>s;s++){var l=c.videoQueue[s].videoConfig,u=n.contexts[l.context],p=n.contexts["default"];if((void 0===u||null===u)&&(u=p,window.debugMsg("No context was found for '"+l.context+"'. Using default context. Please check your configuration")),u){c.videoQueue[s].overridesConfig&&jQuery.extend(u,c.videoQueue[s].overridesConfig),u.type||(u.type=p.type);var g=u.type?u.type:p.type;if(g){var f=g+"_dependencies";if(0>jQuery.inArray(f)){d.push(f);var w=a[g+"_dependencies"];w&&jQuery.merge(r,w)}}}}CNNVIDEOAPI.DependencyManager.loadDependency(r,i)};if(i)for(var N=Object.keys(s),h=0;N.length>h;h++){var v=s[N[h]],I=N[h];window.debugMsg("setting window["+I+"SectionConfigLoadComplete]"),window[I+"SectionConfigLoadComplete"]=function(e){window.debugMsg("anonymouse callback for section:"+I),y(e,I)},CNNVIDEOAPI.DependencyManager.loadJSON(v,I+"SectionConfigLoadComplete")}}}}var n;return{getInstance:function(){return n||(n=e()),window.cnnVideoManager&&window.cnnVideoManager!==n?window.cnnVideoManager:n}}}(),function(){window.cnnVideoManager||(window.cnnVideoManager=CNNVIDEOAPI.CNNVideoManager.getInstance())}(window),CNNVIDEOAPI.ClassBase=function(){var e=!1,n=/xyz/.test(function(){})?/\b_super\b/:/.*/,t=function(){};return t.extend=function(t){function o(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var r=new this;e=!1;for(var a in t)r[a]="function"==typeof t[a]&&"function"==typeof i[a]&&n.test(t[a])?function(e,n){return function(){var t=this._super;this._super=i[e];var o=n.apply(this,arguments);return this._super=t,o}}(a,t[a]):t[a];return o.prototype=r,o.constructor=o,o.extend=arguments.callee,o},t}(),CNNVIDEOAPI.DependencyManager={loadApiDependenciesFromConfig:function(e){var n=function(){window.debugMsg("DependencyManager: All dependencies loaded. About to call CNNVideoAPILoadComplete");var e=function(){window.CNNVideoAPILoadComplete?window.CNNVideoAPILoadComplete():window.errorMsg('CNNVideoAPILoadComplete function not defined. Make sure you have a CNNVideoAPILoadComplete function defined and assigned as a window function. Eg window["CNNVideoAPILoadComplete"] = yourFunction;');try{if(void 0!==window.CNNVideoAPILoadCompleteHandlers&&Array.isArray(window.CNNVideoAPILoadCompleteHandlers))for(var e=0;window.CNNVideoAPILoadCompleteHandlers.length>e;e++){var n=window.CNNVideoAPILoadCompleteHandlers[e];"function"==typeof n&&n()}}catch(t){}};e()},t=e.global_dependencies;void 0!==CNNVIDEOAPI.client&&void 0!==e.client&&void 0!==e.client[CNNVIDEOAPI.client]&&void 0!==e.client[CNNVIDEOAPI.client].client_dependencies&&Array.isArray(e.client[CNNVIDEOAPI.client].client_dependencies)&&(t=jQuery.merge(t,e.client[CNNVIDEOAPI.client].client_dependencies)),this.loadDependency(t,n)},loadJSON:function(e,n){jQuery.ajax({url:e,dataType:"jsonp",type:"GET",async:!0,contentType:"application/json;",jsonpCallback:n?n:"callbackObj",processData:!0,cache:!0,data:{}})},getScripts:function(e,n){window.debugMsg("DependencyManager getScripts and scripts are, ",e);var t=0,o=function(){++t==e.length&&n()};e.forEach(function(e){jQuery.ajaxSetup({cache:!0}),jQuery.getScript(e,o)})},checkIfAssetLoadedHandler:function(e,n,t,o){window.debugMsg("DependencyManger checkIfAssetLoadedHandler Checking if resources actually loaded");for(var i=!1,r=0;n.length>r;r++){var a=n[r];if(a.failTestURL){var d=CNNVIDEOAPI.Utils.getTestFromString(a.test);if(window.debugMsg("DependencyManager after initial load testing script load and test result is ",!!d),"function"==typeof d&&!d){window.debugMsg("DependencyManager failed to load a resource so gonna reload failed resource is ",a.failTestURL),i=!0;break}}}i?(window.debugMsg("DependencyManager and going to call getScripts again due to a failure"),e.getScripts(t,o)):o()},loadDependency:function(e,n){var t=!1,o=[],i=[];Array.isArray(e)||(e=[e]);for(var r=this,a=[],d=0;e.length>d;d++){var c=e[d],s=CNNVIDEOAPI.Utils.getTestFromString(c.test);window.debugMsg("DependencyManager checking dependency to see if it needs to be loaded: ",c.failTestURL),("function"==typeof s&&!s||"boolean"==typeof s&&!s)&&(window.debugMsg("DependencyManager dependency doesn't already exist adding ",c.failTestURL),o.push(c.failTestURL),i.push(c));var l={test:CNNVIDEOAPI.Utils.getTestFromString(c.test),nope:c.failTestURL+(t?"?cb="+Math.round(1e9*Math.random()).toString(16):""),callback:function(){window.debugMsg("DependencyManager callback itemData.id callback:"+c.id)},complete:function(){window.debugMsg("DependencyManager load of "+c.id+" is complete")}};void 0!==c.passTestURL&&(l.yep=c.passTestURL),a.push(l)}var u={complete:function(){checkIfAssetLoadedHandler(this,i,o,n)}};a.push(u),0>=o.length&&n?n():this.getScripts(o,function(){r.checkIfAssetLoadedHandler(r,i,o,n)})}},CNNVIDEOAPI.Utils={tmpl:function(e,n){var t=/\{\{([^{\}]+)\}\}/g;return(e+"").replace(t,function(e,t){return t in(n||{})?/^f/.test(typeof n[t])?n[t]():n[t]:e})},getNextCVPId:function(){return window.CVP_INDEX||(window.CVP_INDEX=0),window.CVP_INDEX+=1,"cvp_"+window.CVP_INDEX},copyObjectProperty:function(e,n,t,o){e=void 0!==e?e:{};var i=n[o];return void 0!==t&&void 0!==t[o]&&(i=t[o]),void 0!==i&&(e[o]=i),e},createStylesheet:function(e){var n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),n.appendChild(t)},eventLogger:function(e){window.debugMsg(e)},getPlayerType:function(e){return/\b(Kindle|Fire|Silk|Android|IEMobile)\b/gi.test(e)?CVP.HTML5:CVP.FLASH},getEditionURL:function(e){var n=decodeURIComponent(document.location.hash.replace(/^#/,""));if(n)return n;var t="www",o=/SelectedEdition=(www|edition);/.exec(e);return null!==o&&o.length&&o[1].length&&(t=o[1]),/((www|edition|us)\.)?(preview\.)?((dev|ref|train|cnnpreview)\.)cnn\.com(:(82|94|80))?/.test(document.location.host)?"http://"+document.location.host:"http://"+t+".cnn.com"},generateWindowVariables:function(e,n,t){t=!t||t;var o="",i="";if("string"==typeof e){var r=e.split(".");if(r.length>1){i=r.pop(),o=r.join(".");var a=this.createNamespaceFromString(o);!a[i]||t?a[i]=n:window.debugMsg("Variable '"+e+"' already exists. Will not set.")}else!window[e]||t?window[e]=n:window.debugMsg("Variable '"+e+"' already exists. Will not set.")}},createNamespaceFromString:function(e,n,t){var o,i,r=e.split(n||"."),a=t||window;for(o=0,i=r.length;i>o;o++)a=a[r[o]]=a[r[o]]||{};return a},deserializeJSONData:function(e){if(null===e||""===e)return null;if("object"!=typeof e)try{e=window.JSON.parse(e)}catch(n){e=jQuery.deparam(e)}return e},getContextByName:function(e,n){try{var t=n.context;return e[t]?e[t]:(window.warnMsg("Could not find context '"+t+"'. Will use the 'default' context. Please add "+t+" to your configuration. \nVideo Configuration for missing context is:\nnetwork:'"+n.network+"'\nprofile:'"+n.profile+"' \nsection'"+n.section+"'\n"),e["default"])}catch(o){return{}}},getDefaultContext:function(e){try{return e["default"]}catch(n){return{}}},getTestFromString:function(str){var evaled=eval(str);return void 0!==evaled&&evaled},getQueryStringParameter:function(e){try{for(var n=location.search.replace("?",""),t=n.split("&"),o=0;t.length>o;o++){var i=t[o],r=i.split("="),a=r[0],d=r[1];if(a.replace(" ","")===e)return d}}catch(c){}},getDebug:function(){try{for(var e=location.search.replace("?",""),n=e.split("&"),t=0;n.length>t;t++){var o=n[t],i=o.split("="),r=i[0],a=i[1];"debug"===r.replace(" ","")&&(window.debugMode=a)}}catch(d){}},getVersion:function(){if(!CNNVIDEOAPI.currentVersion){try{for(var e=document.getElementById("cnnAPIJS"),n=e.src.replace(/^[^\?]+\??/,""),t=n.split("&"),o=0;t.length>o;o++){var i=t[o],r=i.split("="),a=r[0],d=r[1];if("version"===a.replace(" ",""))return d}}catch(c){}return"latest"}return CNNVIDEOAPI.currentVersion}};